<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RevoBank: Customer Segmentation Analysis</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        revo: {
                            navy: '#002147',
                            gold: '#F0E442',
                            light: '#F4F4F4',
                            white: '#FFFFFF',
                            text: '#333333',
                            danger: '#D32F2F',
                            success: '#388E3C'
                        }
                    },
                    fontFamily: {
                        sans: ['Lato', 'sans-serif'],
                        heading: ['Poppins', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Chart Container Styling Rules */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width to prevent stretching */
            height: 350px;    /* Default responsive height */
            margin-left: auto;
            margin-right: auto;
        }

        @media (max-width: 640px) {
            .chart-container {
                height: 280px; /* Smaller height for mobile */
            }
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #002147; 
            border-radius: 4px;
        }
        
        .active-tab {
            border-bottom: 3px solid #F0E442;
            color: #002147;
            font-weight: 700;
        }
    </style>

    <!-- Chosen Palette: RevoBank Corporate (Navy Blue #002147, Golden Yellow #F0E442) -->
    <!-- Application Structure Plan:
         1. Hero Section: High-level context and Key Metrics (Net Profit, Fraud).
         2. Financial Deep Dive: Interactive charts showing the Gross -> Fraud -> Net waterfall.
         3. Segmentation Hub: The core interactive module. Clickable cards for each cluster that update a central detailed view and charts.
         4. Strategic Roadmap: A timeline view of recommendations.
         5. Methodology Footer: Trust-building data hygiene info.
         Rationale: This structure moves from "What is the problem?" (Financials) to "Who is causing it?" (Segmentation) to "What do we do?" (Strategy).
    -->
    <!-- Visualization & Content Choices:
         1. Financials: Doughnut chart to visualize the Fraud "bite" out of Gross Profit.
         2. Brand Perf: Bar chart for Avg Transaction size (Comparison).
         3. Clusters: Interactive Bubble Chart (simulated scatter) to show Value vs Risk.
         4. Personas: Clickable UI cards updating a detail pane (Inform/Teach).
         CONFIRMATION: NO SVG graphics used (except FontAwesome icons). NO Mermaid JS used.
    -->
</head>
<body class="bg-revo-light text-revo-text font-sans antialiased">

    <!-- Navigation -->
    <nav class="bg-revo-navy text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <i class="fa-solid fa-chart-line text-revo-gold text-2xl mr-3"></i>
                    <span class="font-heading font-bold text-xl tracking-wide">RevoBank Analytics</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <button onclick="scrollToSection('executive')" class="hover:text-revo-gold px-3 py-2 rounded-md text-sm font-medium transition">Executive Summary</button>
                        <button onclick="scrollToSection('financials')" class="hover:text-revo-gold px-3 py-2 rounded-md text-sm font-medium transition">Financial Health</button>
                        <button onclick="scrollToSection('segmentation')" class="hover:text-revo-gold px-3 py-2 rounded-md text-sm font-medium transition">Customer Segments</button>
                        <button onclick="scrollToSection('strategy')" class="hover:text-revo-gold px-3 py-2 rounded-md text-sm font-medium transition">Roadmap</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="executive" class="bg-white shadow-sm mb-8">
        <div class="max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-5xl font-heading font-bold text-revo-navy mb-4">
                Beyond the Numbers: Unlocking Dormant Potential
            </h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-8">
                A strategic analysis of RevoBank's credit card portfolio (Dec '24 - May '25), focusing on transitioning from reactive reporting to proactive growth.
            </p>
            
            <!-- Key Metrics Ticker -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 max-w-5xl mx-auto mt-10">
                <div class="bg-revo-light p-4 rounded-lg border-l-4 border-revo-navy card-hover">
                    <p class="text-sm text-gray-500 uppercase font-bold">Total Volume</p>
                    <p class="text-2xl font-bold text-revo-navy">Rp 458.9 B</p>
                    <p class="text-xs text-green-600"><i class="fa-solid fa-arrow-up"></i> Robust Demand</p>
                </div>
                <div class="bg-revo-light p-4 rounded-lg border-l-4 border-revo-gold card-hover">
                    <p class="text-sm text-gray-500 uppercase font-bold">Gross Profit (MDR)</p>
                    <p class="text-2xl font-bold text-revo-navy">Rp 6.88 B</p>
                    <p class="text-xs text-gray-500">1.5% Margin</p>
                </div>
                <div class="bg-revo-light p-4 rounded-lg border-l-4 border-revo-danger card-hover">
                    <p class="text-sm text-gray-500 uppercase font-bold">Fraud Loss</p>
                    <p class="text-2xl font-bold text-red-600">Rp 5.68 B</p>
                    <p class="text-xs text-red-500"><i class="fa-solid fa-triangle-exclamation"></i> 82.5% of Gross</p>
                </div>
                <div class="bg-revo-light p-4 rounded-lg border-l-4 border-green-600 card-hover">
                    <p class="text-sm text-gray-500 uppercase font-bold">Net Profit</p>
                    <p class="text-2xl font-bold text-green-700">Rp 1.20 B</p>
                    <p class="text-xs text-gray-500">Actualized Surplus</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-16 pb-20">

        <!-- Section 1: Financial Health Deep Dive -->
        <section id="financials" class="scroll-mt-24">
            <div class="mb-6">
                <span class="text-revo-gold font-bold uppercase tracking-wider text-sm">The Challenge</span>
                <h2 class="text-3xl font-heading font-bold text-revo-navy">The "High-Velocity, Low-Margin" Trap</h2>
                <p class="mt-2 text-gray-600 max-w-4xl">
                    While transaction volume is high, our analysis reveals a critical friction point. The bank is "running fast to stay in place" due to significant fraud leakage. Understanding this profit composition is the first step to optimization.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                <!-- Chart: Profit Composition -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-lg font-bold text-revo-navy mb-4 border-b pb-2">Profit Breakdown (Actual vs. Potential)</h3>
                    <div class="chart-container">
                        <canvas id="financialChart"></canvas>
                    </div>
                    <div class="mt-4 bg-yellow-50 p-4 rounded-lg text-sm text-yellow-800 border border-yellow-200">
                        <i class="fa-solid fa-lightbulb mr-2"></i>
                        <strong>Insight:</strong> For every Rp 100 earned in merchant fees, Rp 82 is currently lost to fraud. Reducing fraud by just 20% would double our Net Profit.
                    </div>
                </div>

                <!-- Chart: Brand Analysis -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-lg font-bold text-revo-navy mb-4 border-b pb-2">Brand Performance: Quality vs. Volume</h3>
                    <div class="flex justify-end mb-2">
                         <div class="text-xs text-gray-500">Avg Transaction Value (IDR)</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="brandChart"></canvas>
                    </div>
                    <div class="mt-4 text-sm text-gray-600">
                        <p><strong>Premium Drivers:</strong> JCB and Amex yield higher value per swipe (Rp 880k+), ideal for luxury targeting.</p>
                        <p class="mt-1"><strong>Volume Engines:</strong> Visa and Mastercard drive frequency but lower ticket sizes (Rp 660k-710k), ideal for daily habit formation.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Customer Segmentation -->
        <section id="segmentation" class="scroll-mt-24">
            <div class="mb-6">
                <span class="text-revo-gold font-bold uppercase tracking-wider text-sm">The Discovery</span>
                <h2 class="text-3xl font-heading font-bold text-revo-navy">Who Are Our Customers?</h2>
                <p class="mt-2 text-gray-600 max-w-4xl">
                    Using K-Means clustering on RFM and financial health metrics (DTI), we identified four distinct personas. Moving from mass marketing to these targeted profiles is key to efficiency.
                </p>
            </div>

            <!-- Interactive Segmentation Dashboard -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
                <!-- Tabs/Cards for Cluster Selection -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 bg-revo-navy text-white">
                    <button onclick="selectCluster(3)" id="tab-3" class="p-4 hover:bg-opacity-90 transition text-left focus:outline-none border-b-4 border-transparent active-tab">
                        <div class="text-xs uppercase opacity-75">Cluster 3</div>
                        <div class="font-bold text-lg"><i class="fa-solid fa-crown mr-2 text-revo-gold"></i>Elite Spender</div>
                        <div class="text-xs mt-1">High Value, Low Risk</div>
                    </button>
                    <button onclick="selectCluster(1)" id="tab-1" class="p-4 hover:bg-opacity-90 transition text-left focus:outline-none border-b-4 border-transparent opacity-70 hover:opacity-100">
                        <div class="text-xs uppercase opacity-75">Cluster 1</div>
                        <div class="font-bold text-lg"><i class="fa-solid fa-fire mr-2 text-orange-400"></i>Stretched</div>
                        <div class="text-xs mt-1">High Use, High Debt</div>
                    </button>
                    <button onclick="selectCluster(0)" id="tab-0" class="p-4 hover:bg-opacity-90 transition text-left focus:outline-none border-b-4 border-transparent opacity-70 hover:opacity-100">
                        <div class="text-xs uppercase opacity-75">Cluster 0</div>
                        <div class="font-bold text-lg"><i class="fa-solid fa-bed mr-2 text-gray-400"></i>Dormant</div>
                        <div class="text-xs mt-1">Sleeping Giant</div>
                    </button>
                    <button onclick="selectCluster(2)" id="tab-2" class="p-4 hover:bg-opacity-90 transition text-left focus:outline-none border-b-4 border-transparent opacity-70 hover:opacity-100">
                        <div class="text-xs uppercase opacity-75">Cluster 2</div>
                        <div class="font-bold text-lg"><i class="fa-solid fa-leaf mr-2 text-green-400"></i>Niche</div>
                        <div class="text-xs mt-1">Low Income/Use</div>
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-0">
                    <!-- Detail Pane -->
                    <div class="col-span-1 bg-gray-50 p-6 border-r border-gray-200">
                        <h3 id="cluster-title" class="text-2xl font-heading font-bold text-revo-navy mb-1">The Elite Spender</h3>
                        <span id="cluster-count" class="inline-block bg-revo-navy text-white text-xs px-2 py-1 rounded mb-4">503 Customers</span>
                        
                        <div class="space-y-4">
                            <div>
                                <p class="text-xs text-gray-500 uppercase font-bold">Avg Transaction (6M)</p>
                                <p id="cluster-spend" class="text-xl font-bold text-revo-navy">Rp 411,694,744</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 uppercase font-bold">Risk Profile (DTI)</p>
                                <p id="cluster-dti" class="text-xl font-bold text-green-600">0.08 (Very Low)</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 uppercase font-bold">Key Characteristic</p>
                                <p id="cluster-desc" class="text-sm text-gray-700 leading-relaxed">
                                    Highest credit limits and pristine financial health. They treat credit as a convenience, not a lifeline. Likely hold premium cards from competitors.
                                </p>
                            </div>
                            <div class="pt-4 border-t border-gray-200">
                                <p class="text-xs text-revo-gold uppercase font-bold mb-2">Recommended Action</p>
                                <div id="cluster-action" class="bg-white p-3 rounded shadow-sm border border-l-4 border-l-revo-gold text-sm text-gray-800">
                                    <strong>Premiumization:</strong> Launch "Invite-Only" VIP tier with lifestyle perks (Lounge, Concierge) to build exit barriers.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visualization Pane -->
                    <div class="col-span-1 lg:col-span-2 p-6 bg-white">
                         <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-gray-700">Cluster Distribution: Spend vs. Risk</h3>
                            <div class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">
                                X: Debt-to-Income | Y: Total Spend (Log Scale)
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="clusterChart"></canvas>
                        </div>
                        <div class="mt-4 text-center text-xs text-gray-400">
                            *Bubble size represents Population Count
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Strategic Roadmap -->
        <section id="strategy" class="scroll-mt-24">
            <div class="mb-6">
                <span class="text-revo-gold font-bold uppercase tracking-wider text-sm">The Plan</span>
                <h2 class="text-3xl font-heading font-bold text-revo-navy">Strategic Roadmap</h2>
                <p class="mt-2 text-gray-600 max-w-4xl">
                    A phased approach to recapturing value. We focus on securing our best assets first, then reactivating the dormant base.
                </p>
            </div>

            <div class="relative border-l-4 border-revo-navy ml-4 space-y-12">
                <!-- Phase 1 -->
                <div class="relative pl-8">
                    <div class="absolute -left-3 top-0 bg-revo-gold border-4 border-revo-navy w-6 h-6 rounded-full"></div>
                    <div class="bg-white p-6 rounded-lg shadow hover:shadow-md transition border border-gray-100">
                        <span class="text-xs font-bold text-revo-gold bg-revo-navy px-2 py-1 rounded uppercase">Phase 1: Months 1-2</span>
                        <h3 class="text-xl font-bold text-revo-navy mt-2">Profit Protection & Asset Securing</h3>
                        <p class="text-gray-600 mt-2 text-sm">Focus on the "Elite Spenders" (Cluster 3) and stopping the bleed.</p>
                        <ul class="mt-4 space-y-2 text-sm text-gray-700">
                            <li class="flex items-start"><i class="fa-solid fa-check text-green-500 mt-1 mr-2"></i> <span><strong>Fraud Overhaul:</strong> Deploy anomaly detection for high-velocity transactors. Goal: Reduce leakage by 20%.</span></li>
                            <li class="flex items-start"><i class="fa-solid fa-check text-green-500 mt-1 mr-2"></i> <span><strong>VIP Lock-in:</strong> Launch "Revo Infinite" upgrade for Cluster 3 to prevent churn.</span></li>
                        </ul>
                    </div>
                </div>

                <!-- Phase 2 -->
                <div class="relative pl-8">
                    <div class="absolute -left-3 top-0 bg-white border-4 border-revo-navy w-6 h-6 rounded-full"></div>
                    <div class="bg-white p-6 rounded-lg shadow hover:shadow-md transition border border-gray-100">
                        <span class="text-xs font-bold text-revo-navy bg-gray-200 px-2 py-1 rounded uppercase">Phase 2: Months 3-6</span>
                        <h3 class="text-xl font-bold text-revo-navy mt-2">Activation & Volume Growth</h3>
                        <p class="text-gray-600 mt-2 text-sm">Awakening the "Dormant Goldmine" (Cluster 0) and shifting Cluster 1 behavior.</p>
                        <ul class="mt-4 space-y-2 text-sm text-gray-700">
                            <li class="flex items-start"><i class="fa-solid fa-bolt text-revo-gold mt-1 mr-2"></i> <span><strong>Revo-Start Campaign:</strong> "3 Swipes = Rp 300k Cashback" challenge for dormant users.</span></li>
                            <li class="flex items-start"><i class="fa-solid fa-bolt text-revo-gold mt-1 mr-2"></i> <span><strong>Category Shift:</strong> Incentivize Cluster 1 to move spend to low-risk categories (Groceries/Fuel) via partnerships.</span></li>
                        </ul>
                    </div>
                </div>

                <!-- Phase 3 -->
                <div class="relative pl-8">
                    <div class="absolute -left-3 top-0 bg-white border-4 border-revo-navy w-6 h-6 rounded-full"></div>
                    <div class="bg-white p-6 rounded-lg shadow hover:shadow-md transition border border-gray-100">
                        <span class="text-xs font-bold text-revo-navy bg-gray-200 px-2 py-1 rounded uppercase">Phase 3: Ongoing</span>
                        <h3 class="text-xl font-bold text-revo-navy mt-2">Dynamic Optimization</h3>
                        <p class="text-gray-600 mt-2 text-sm">Long-term portfolio health management.</p>
                        <ul class="mt-4 space-y-2 text-sm text-gray-700">
                            <li class="flex items-start"><i class="fa-solid fa-rotate text-blue-500 mt-1 mr-2"></i> <span><strong>Quarterly Migration Tracking:</strong> KPI: % of Cluster 0 moving to Cluster 1 or 3.</span></li>
                            <li class="flex items-start"><i class="fa-solid fa-sliders text-blue-500 mt-1 mr-2"></i> <span><strong>Dynamic Limits:</strong> Auto-adjust credit limits based on real-time DTI and Velocity monitoring.</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer / Methodology -->
        <footer class="bg-gray-100 rounded-xl p-8 mt-12 text-center text-sm text-gray-500">
            <h4 class="font-bold text-revo-navy mb-2">Methodology Note</h4>
            <p class="max-w-2xl mx-auto">
                Analysis based on internal RevoBank transaction logs (Dec 2024 - May 2025). 
                Data cleaning included: correcting 10x multiplier errors, removing expired cards, and realigning negative fraud values to absolute loss figures. 
                Clustering performed using K-Means with Elbow Method validation.
            </p>
            <p class="mt-4">&copy; 2025 RevoBank Performance Management Team | Analyst: Jojo Wibowo</p>
        </footer>

    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- 1. DATA STATE ---
        const clusterData = {
            3: {
                title: "The Elite Spender",
                count: "503 Customers",
                spend: "Rp 411,694,744",
                dti: "0.08 (Very Low)",
                desc: "Highest credit limits and pristine financial health. They treat credit as a convenience, not a lifeline. Likely hold premium cards from competitors.",
                action: "<strong>Premiumization:</strong> Launch 'Invite-Only' VIP tier with lifestyle perks (Lounge, Concierge) to build exit barriers.",
                icon: "fa-crown",
                color: "text-revo-gold"
            },
            1: {
                title: "The Stretched Spender",
                count: "683 Customers",
                spend: "Rp 366,316,625",
                dti: "0.36 (High Risk)",
                desc: "Heavy transactors pushing their financial limits. They drive volume and interest income but are vulnerable to economic shocks. The 'Revolvers'.",
                action: "<strong>Balance Monitoring:</strong> Offer debt consolidation tools and focus rewards on essential spend (groceries) rather than luxury items.",
                icon: "fa-fire",
                color: "text-orange-400"
            },
            0: {
                title: "The Dormant Goldmine",
                count: "740 Customers",
                spend: "Rp 0",
                dti: "N/A (Inactive)",
                desc: "The largest segment. High credit limits (Avg Rp 47M) but zero usage in 6 months. Acquired but not monetized. 'Back of Wallet' status.",
                action: "<strong>Reactivation:</strong> 'Welcome Back' campaign. Incentivize first 3 transactions with exponential cashback to reform habits.",
                icon: "fa-bed",
                color: "text-gray-400"
            },
            2: {
                title: "The Niche User",
                count: "12 Customers",
                spend: "Low (< Rp 10M)",
                dti: "Variable",
                desc: "Small outlier group with minimal income and spending capacity. Negligible impact on overall portfolio revenue.",
                action: "<strong>Automated Stewardship:</strong> Maintain via low-cost digital channels. Provide financial literacy content.",
                icon: "fa-leaf",
                color: "text-green-400"
            }
        };

        // --- 2. CHART INITIALIZATION ---
        
        // Chart 1: Financial Waterfall (Doughnut)
        const ctxFinancial = document.getElementById('financialChart').getContext('2d');
        const financialChart = new Chart(ctxFinancial, {
            type: 'doughnut',
            data: {
                labels: ['Net Profit (Surplus)', 'Fraud Loss (Leakage)', 'Operational/Other Costs (Implied)'], 
                // Note: Detailed breakdown helps visualize the "Loss". 
                // Gross = 6.88. Fraud = 5.68. Net = 1.20. 
                // Wait, 1.2 + 5.68 = 6.88 exactly. So Gross is purely split between Fraud and Net in this simplified view.
                datasets: [{
                    data: [1.20, 5.68], // Billions
                    backgroundColor: [
                        '#388E3C', // Green for Net
                        '#D32F2F', // Red for Fraud
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '60%',
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: { family: 'Lato' },
                            usePointStyle: true
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += 'Rp ' + context.raw + ' Billion';
                                return label;
                            }
                        }
                    }
                }
            }
        });

        // Chart 2: Brand Analysis (Bar)
        const ctxBrand = document.getElementById('brandChart').getContext('2d');
        const brandChart = new Chart(ctxBrand, {
            type: 'bar',
            data: {
                labels: ['JCB', 'Amex', 'Visa', 'Mastercard'],
                datasets: [{
                    label: 'Avg Transaction Value',
                    data: [889000, 875000, 711000, 661000],
                    backgroundColor: [
                        '#F0E442', // Gold for Premium
                        '#F0E442',
                        '#002147', // Navy for Volume
                        '#002147'
                    ],
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { display: false },
                        ticks: {
                            callback: function(value) {
                                return 'Rp ' + (value/1000) + 'k';
                            }
                        }
                    },
                    x: {
                        grid: { display: false }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // Chart 3: Cluster Scatter (Simulated with Bubble for control)
        // Mapping approximate centers from description
        const ctxCluster = document.getElementById('clusterChart').getContext('2d');
        const clusterChart = new Chart(ctxCluster, {
            type: 'bubble',
            data: {
                datasets: [
                    {
                        label: 'Cluster 3 (Elite)',
                        data: [{x: 0.08, y: 411, r: 20}], // r scaled roughly by population visual weight
                        backgroundColor: '#F0E442'
                    },
                    {
                        label: 'Cluster 1 (Stretched)',
                        data: [{x: 0.36, y: 366, r: 25}], // larger population (683)
                        backgroundColor: '#FB923C'
                    },
                    {
                        label: 'Cluster 0 (Dormant)',
                        data: [{x: 0.15, y: 5, r: 28}], // largest population (740), y near 0
                        backgroundColor: '#9CA3AF'
                    },
                    {
                        label: 'Cluster 2 (Niche)',
                        data: [{x: 0.1, y: 2, r: 5}], // tiny population
                        backgroundColor: '#4ADE80'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        title: { display: true, text: 'Avg Transaction Amount (Millions)' },
                        min: 0,
                        max: 500,
                        grid: { color: '#f3f4f6' }
                    },
                    x: {
                        title: { display: true, text: 'Debt-to-Income (DTI) Ratio' },
                        min: 0,
                        max: 0.5,
                        grid: { color: '#f3f4f6' }
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { usePointStyle: true }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label;
                            }
                        }
                    }
                }
            }
        });


        // --- 3. INTERACTION LOGIC ---

        function selectCluster(id) {
            // 1. Update UI Tabs
            // Reset all
            [0, 1, 2, 3].forEach(i => {
                const btn = document.getElementById(`tab-${i}`);
                btn.classList.remove('active-tab', 'bg-opacity-100', 'opacity-100');
                btn.classList.add('opacity-70', 'hover:opacity-100');
                btn.style.backgroundColor = ""; // reset inline
            });
            
            // Set Active
            const activeBtn = document.getElementById(`tab-${id}`);
            activeBtn.classList.add('active-tab', 'opacity-100');
            activeBtn.classList.remove('opacity-70');
            activeBtn.style.backgroundColor = "rgba(255,255,255,0.1)"; // slight highlight

            // 2. Update Content
            const data = clusterData[id];
            
            // Animate transition
            const detailPane = document.getElementById('cluster-title').parentNode;
            detailPane.style.opacity = 0;
            
            setTimeout(() => {
                document.getElementById('cluster-title').innerText = data.title;
                document.getElementById('cluster-count').innerText = data.count;
                document.getElementById('cluster-spend').innerText = data.spend;
                document.getElementById('cluster-dti').innerText = data.dti;
                
                // Color logic for DTI
                const dtiElem = document.getElementById('cluster-dti');
                if(data.dti.includes("High")) {
                    dtiElem.className = "text-xl font-bold text-red-600";
                } else if (data.dti.includes("Inactive")) {
                     dtiElem.className = "text-xl font-bold text-gray-400";
                } else {
                    dtiElem.className = "text-xl font-bold text-green-600";
                }

                document.getElementById('cluster-desc').innerText = data.desc;
                document.getElementById('cluster-action').innerHTML = data.action;
                
                detailPane.style.opacity = 1;
            }, 200);
        }

        function scrollToSection(id) {
            const element = document.getElementById(id);
            if (element) {
                // Offset for sticky header
                const y = element.getBoundingClientRect().top + window.pageYOffset - 80;
                window.scrollTo({top: y, behavior: 'smooth'});
            }
        }

        // Initialize with Cluster 3 active
        document.addEventListener('DOMContentLoaded', () => {
            selectCluster(3);
        });

    </script>
</body>
</html>
